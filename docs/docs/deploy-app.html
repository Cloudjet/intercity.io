<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Intercity is a webbased hosting management dashboard">
  <meta name="keywords" content="web apps, hosting, dashboard, control panel, heroku, dokku, on-premise, ruby on rails">
  <meta name="author" content="Firmhouse B.V.">

  

  <title>Deploy your app - Intercity Documentation</title>

  <link href="/css/toolkit-minimal.css" rel="stylesheet">
  <link href="/css/intercity-io.css" rel="stylesheet">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/toolkit.js"></script>
  <script src="/js/mixpanel.js"></script>

  
  <!-- Facebook Pixel Code -->
  <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '306595803031459');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=306595803031459&ev=PageView&noscript=1"
  /></noscript>
  <!-- DO NOT MODIFY -->
  <!-- End Facebook Pixel Code -->
  
</head>


<body>

<nav class="navbar navbar-default navbar-static-top navbar-padded text-uppercase app-navbar">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed p-x-0" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        <span><img src="/images/logo.svg" width="30"> Intercity</span>
      </a>
    </div>
    <div class="navbar-collapse collapse" id="navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li >
          <a href="/">Home</a>
        </li>
        <li  >
          <a href="/tour">Tour</a>
        </li>
        <li class="active">
          <a href="/docs">Docs</a>
        </li>
        <li   >
          <a href="/support">Pricing</a>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>


<div class="container">

  <div class="row">

    <div class="col-sm-3">

      <ul class="nav nav-bordered nav-stacked">
        <li ><a href="/docs">Introduction</a></li>
        <li class="nav-divider"></li>
        <li class="nav-header">Installation</li>
        <li ><a href="/docs/install.html">Install Intercity</a></li>
        <li ><a href="/docs/initial-setup.html">Initial setup</a></li>
        <li class="nav-divider"></li>
        <li class="nav-header">Getting started</li>
        <li ><a href="/docs/install-server.html">Install a server</a></li>
        <li ><a href="/docs/add-app.html">Add an app</a></li>
        <li ><a href="/docs/configure-domain-name.html">Configure domain name</a></li>
        <li ><a href="/docs/add-database.html">Add a database</a></li>
        <li ><a href="/docs/add-deploy-key.html">Add deploy key</a></li>
        <li class="active"><a href="/docs/deploy-app.html">Deploy your app</a></li>
      </ul>

    </div>

    <div class="col-sm-9 docs-content">

      <h1 class="m-t-0">Deploy your app</h1>

<p>Awesome, you’re at the final step. With Intercity, you’ve installed your app server, added your app, configured its domain name, enabled PostgreSQL and added your deploy to key. It’s now time to deploy your app with an easy git push.</p>

<h2 id="adding-the-git-remote">Adding the git remote</h2>

<p>Every app hosted with Intercity has its own unique deploy URL. You can find the deploy URL on the Info tab of an app in your Intercity instance.</p>

<p><img src="/images/docs-app-info-deploy-url@2x.png" class="img-responsive img-thumbnail" /></p>

<p>Add that URL as a remote called “dokku” to the Git repository of your app’s code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ git remote add dokku dokku@95.85.28.175:my-app
</code></pre>
</div>

<h2 id="enabling-migrations-on-deploy">Enabling migrations on deploy</h2>

<p>If you’re deploying a Ruby on Rails app, you probably want your database migrations to be run on every deploy. You can do this by creating a file <code class="highlighter-rouge">lib/tasks/run_migrations.rake</code> in your Rails project with the following content:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Rake::Task['assets:clean'].enhance do
  Rake::Task['db:migrate'].invoke
end
</code></pre>
</div>

<h2 id="deploying-your-app">Deploying your app</h2>

<p>Let’s deploy the app! Commit all your recent changes that you want to deploy and run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ git push dokku master
</code></pre>
</div>

<p>Dokku, the underlying system that Intercity uses to deploy your apps, will now take care of updating your code, running database migrations, do asset compilation and perform a rolling restart of your app.</p>

<p>After the <code class="highlighter-rouge">git push</code> finishes, just browse to the domain name of your app and it should be available.</p>

<h2 id="further-information">Further information</h2>

<p>This is the end of this Getting Started guide. If you have any questions or issues with the use of Intercity, please <a href="https://github.com/intercity/intercity-next">open an issue on Github</a>.</p>

<script type="text/javascript">
fbq('track', 'ReadDocsDeployApp');
</script>



    </div>

  </div>

</div>

<script>
  mixpanel.track("page viewed", {
    'page name' : document.title,
    'url' : window.location.pathname
  })
</script>


<!-- Google Code for Conversations started Conversion Page
In your html page, add the snippet and call
goog_report_conversion when someone clicks on the
chosen link or button. -->
<script type="text/javascript">
  /* <![CDATA[ */
  goog_snippet_vars = function() {
    var w = window;
    w.google_conversion_id = 1055733136;
    w.google_conversion_label = "wq85CIbdh2oQkOu09wM";
    w.google_remarketing_only = false;
  }
  // DO NOT CHANGE THE CODE BELOW.
  goog_report_conversion = function(url) {
    goog_snippet_vars();
    window.google_conversion_format = "3";
    var opt = new Object();
    opt.onload_callback = function() {
    if (typeof(url) != 'undefined') {
      window.location = url;
    }
  }
  var conv_handler = window['google_trackConversion'];
  if (typeof(conv_handler) == 'function') {
    conv_handler(opt);
  }
}
/* ]]> */
</script>
<script type="text/javascript"
  src="//www.googleadservices.com/pagead/conversion_async.js">
</script>


</body>
</html>
