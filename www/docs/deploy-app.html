<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Intercity is a hosting management dashboard.">
  <meta name="keywords" content="web apps, hosting, dashboard, control panel">
  <meta name="author" content="Firmhouse">

  <title>Intercity</title>

  <link href="/css/toolkit-minimal.css" rel="stylesheet">
  <link href="/css/intercity-io.css" rel="stylesheet">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/toolkit.js"></script>
</head>


<body>

<nav class="navbar navbar-default navbar-static-top navbar-padded text-uppercase app-navbar">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed p-x-0" data-toggle="collapse" data-target="#navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../">
        <span>Intercity.io</span>
      </a>
    </div>
    <div class="navbar-collapse collapse" id="navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li >
          <a href="/">Home</a>
        </li>
        <li  >
          <a href="/tour">Tour</a>
        </li>
        <li class="active">
          <a href="/docs">Docs</a>
        </li>
        <li   >
          <a href="/support">Get Support</a>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>


<div class="container">

  <div class="row">

    <div class="col-sm-3">

      <ul class="nav nav-bordered nav-stacked">
        <li ><a href="/docs">Introduction</a></li>
        <li class="nav-divider"></li>
        <li class="nav-header">Installation</li>
        <li ><a href="/docs/install.html">Install Intercity</a></li>
        <li ><a href="/docs/initial-setup.html">Initial setup</a></li>
        <li class="nav-divider"></li>
        <li class="nav-header">Getting started</li>
        <li ><a href="/docs/install-server.html">Install a server</a></li>
        <li ><a href="/docs/add-app.html">Add an app</a></li>
        <li ><a href="/docs/configure-domain-name.html">Configure domain name</a></li>
        <li ><a href="/docs/add-database.html">Add a database</a></li>
        <li ><a href="/docs/add-deploy-key.html">Add deploy key</a></li>
        <li class="active"><a href="/docs/deploy-app.html">Deploy your app</a></li>
      </ul>

    </div>

    <div class="col-sm-9 docs-content">

      <h1 class="m-t-0">Deploy your app</h1>

<p>Awesome, you’re at the final step. With Intercity, you’ve installed your app server, added your app, configured its domain name, enabled PostgreSQL and added your deploy to key. It’s now time to deploy your app with an easy git push.</p>

<h2 id="adding-the-git-remote">Adding the git remote</h2>

<p>Every app hosted with Intercity has its own unique deploy URL. You can find the deploy URL on the Info tab of an app in your Intercity instance.</p>

<p><img src="/images/docs-app-info-deploy-url@2x.png" class="img-responsive img-thumbnail" /></p>

<p>Add that URL as a remote called “dokku” to the Git repository of your app’s code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ git remote add dokku dokku@95.85.28.175:my-app
</code></pre>
</div>

<h2 id="enabling-migrations-on-deploy">Enabling migrations on deploy</h2>

<p>If you’re deploying a Ruby on Rails app, you probably want your database migrations to be run on every deploy. You can do this by creating a file <code class="highlighter-rouge">lib/tasks/run_migrations.rake</code> in your Rails project with the following content:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Rake::Task['assets:clean'].enhance do
  Rake::Task['db:migrate'].invoke
end
</code></pre>
</div>

<h2 id="deploying-your-app">Deploying your app</h2>

<p>Let’s deploy the app! Commit all your recent changes that you want to deploy and run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ git push dokku master
</code></pre>
</div>

<p>Dokku, the underlying system that Intercity uses to deploy your apps, will now take care of updating your code, running database migrations, do asset compilation and perform a rolling restart of your app.</p>


    </div>

  </div>

</div>

</body>
</html>
